{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/bcgov/harvest-restrictions/main/sources.schema.json",
    "title": "Resource extraction restriction data sources",
    "description": "List of data sources used to generate harvest restrictions, in order of hierarchy",
    "type": "array",
    "items": {
        "type": "object",
        "properties": {
            "name": {
                "description": "Name of the data source",
                "type": "string"
            },
            "alias": {
                "description": "Unique slug used to name/identify the data source when processing",
                "type": "string"
            },
            "class_number": {
                "description": "Number of the generalized restriction class associatated with the data source",
                "type": "integer",
                "enum": [1, 2, 3, 4, 5, 6]
            },
            "source_type": {
                "description": "Describes whether source is to be downloaded from BCGW (ie WFS using bcdata) or from FILE",
                "type": "string",
                "enum": ["BCGW", "FILE"]
            },
            "source": {
                "description": "Full name of the BCGW table to use as source (eg, WHSE_ADMIN_BOUNDARIES.CLAB_NATIONAL_PARKS) or url/path of a file based source readable by GDAL/OGR",
                "type": "string"
            },
            "layer": {
                "description": "Layer to use within a file based source",
                "type": "string"
            },
            "primary_key": {
                "description": "The column holding primary key for source",
                "type": ["string", "null"]
            },
            "name_column": {
                "description": "Text column in source/layer to use for restriction_name",
                "type": ["string", "null"]
            },
            "query": {
                "description": "Query to subset data in source/layer - ECQL for BCGW sources, OGR SQL for files",
                "type": ["string", "null"]
            }
        },
        "required": ["name", "alias", "class_number", "source_type", "source", "name_column", "query"]
    }
}